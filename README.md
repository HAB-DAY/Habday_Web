# ğŸ ì„œë¹„ìŠ¤ ì†Œê°œ

ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê¸°í”„í‹°ì½˜ ì„ ë¬¼ ë°›ê¸°, ë„ˆë¬´ ì§„ë¶€í•œ ìƒì¼ì´ì§€ ì•Šë‚˜ìš”? HABDAYë¥¼ ì´ìš©í•´ ì¹œêµ¬ë“¤ì—ê²Œ ì„ ë¬¼ í€ë”©ì„ ë°›ì•„ë³´ì„¸ìš”!

<p align = "center">
<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/514070c4-c7c6-472a-9dcc-24dd3eca0474" width="200" height="200"/> 
</p>

HABDAYëŠ” ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” ì„ ë¬¼ í€ë”© í”Œë«í¼ì…ë‹ˆë‹¤.<br/>
ìì‹ ì´ ì›í•˜ëŠ” ì„ ë¬¼ì„ ì¹œêµ¬ë“¤ì—ê²Œ í€ë”©ì„ ë°›ê³ , ê·¸ë™ì•ˆ ê°–ê³  ì‹¶ì—ˆë˜ ê³ ê°€ì˜ ì„ ë¬¼ì„ êµ¬ë§¤í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/>
ë¿ë§Œ ì•„ë‹ˆë¼, ì¹œêµ¬ë“¤ì˜ ë„ì›€ìœ¼ë¡œ ê¿ˆì„ ì‹¤í˜„í•  ìˆ˜ë„ ìˆëŠ” í˜ì‹ ì ì¸ í”Œë«í¼ì…ë‹ˆë‹¤. 

<br/>

# ğŸ›  ì‚¬ìš©ê¸°ìˆ  ë° ë¼ì´ë¸ŒëŸ¬ë¦¬

`Next.js`
- React ê¸°ë°˜ì˜ ì›¹ ê°œë°œ í”„ë ˆì„ì›Œí¬
- ê²€ìƒ‰ì—”ì§„ ìµœì í™”(SEO)ì™€ ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§(SSR)ì˜ ì¥ì ì„ ê°€ì§€ê³  ìˆìŒ
- Routingì˜ í¸ì˜ì„±ì´ ì„œë¹„ìŠ¤ íŠ¹ì§•ê³¼ ì˜ ë§ë¬¼ë¦¬ê¸° ë•Œë¬¸ì— ì‚¬ìš©

`Typescript`

- Javascriptì— íƒ€ì…ì´ ì¶”ê°€ëœ ì •ì  íƒ€ì… ì–¸ì–´
- complie ë‹¨ê³„ì—ì„œ ì—ëŸ¬ë¥¼ ë°œê²¬í•´ë‚¼ ìˆ˜ ìˆì–´ íš¨ìœ¨ì ì¸ ê°œë°œ ê°€ëŠ¥

`React-query`

- ì„œë²„ ìƒíƒœê´€ë¦¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

`Recoil`

- ì „ì—­ í´ë¼ì´ì–¸íŠ¸ ìƒíƒœê´€ë¦¬ë¥¼ ìœ„í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬

`Styled-components`

- ë™ì  ìŠ¤íƒ€ì¼ë§ì„ ìš©ì´í•˜ê²Œ í•´ì£¼ëŠ” ìŠ¤íƒ€ì¼ë§ ë¼ì´ë¸ŒëŸ¬ë¦¬

`Axios`

- HTTP ìš”ì²­ì„ ìš©ì´í•˜ê²Œ í•´ì£¼ëŠ” Promise ê¸°ë°˜ ë¼ì´ë¸ŒëŸ¬ë¦¬

<br/>

# ğŸ“Œ ê¸°ëŠ¥ ë° ë·° ì„¤ëª…

<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/9f4ee31c-adb4-41d0-a87c-34c0bcb08062" width="200" /> 

<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/3f0fd95a-6901-439b-80d5-df52de4d0f4e" width="200" /> 


## ë¡œê·¸ì¸ ë·°

- ì°¸ì—¬ìê°€ ìƒì„±ìê°€ ê³µìœ í•œ ë§í¬ë¡œ ì§„ì…í•˜ê²Œ ë˜ë©´, ë¡œê·¸ì¸ í™”ë©´ì„ ë³´ì—¬ì¤€ë‹¤.
- `ë„¤ì´ë²„ë¡œ ì‹œì‘í•˜ê¸°` ë²„íŠ¼ì„ í´ë¦­í•˜ë©´, ë„¤ì´ë²„ë¡œê·¸ì¸ ë§í¬ë¡œ ì ‘ì†í•œë‹¤.
- ì°¸ì—¬ìê°€ ë„¤ì´ë²„ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì—¬ ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ ì¸ê°€ì½”ë“œë¥¼ ë°œê¸‰ë°›ëŠ”ë‹¤.
- ë°œê¸‰ë°›ì€ ì¸ê°€ì½”ë“œë¥¼ ì„œë²„ì— ì „ë‹¬í•´, ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•œë‹¤.
- ë°œê¸‰ë°›ì€ ì•¡ì„¸ìŠ¤ í† í°ì€ ì•ìœ¼ë¡œì˜ ì„œë²„ ìš”ì²­ ì‹œ headersì— ë„£ì–´ ì‚¬ìš©ì ì‹ë³„ì— ì‚¬ìš©ëœë‹¤.
- ë§Œì•½ ìµœì´ˆë¡œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì´ë©´, ì¶”ê°€ ì •ë³´ë¥¼ ì…ë ¥í•˜ì—¬ ê°€ì…ì„ ì™„ë£Œí•œë‹¤.

<br/>

<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/b9234ae3-01e5-4f75-a9e7-01280060acc7" width="200" /> 

## í€ë”© ìƒì„¸ë³´ê¸° ë·°

- ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ í€ë”© ìƒì„¸ë³´ê¸° ë·°ë¡œ ì§„ì…í•˜ë©°, ìƒì„±ì ì´ë¦„, í€ë”© ì´ë¦„, í€ë”© ì‚¬ì§„, ëª¨ì¸ ê¸ˆì•¡ì´ í‘œì‹œëœë‹¤.
- `í€ë”©ì— ì°¸ì—¬í• ë˜ìš”` ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ í€ë”© ì°¸ì—¬ë¥¼ ìœ„í•œ ì •ë³´ ì…ë ¥ ë·°ë¡œ ì´ë™í•œë‹¤.

<br/>

<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/cfc43d6f-6b5f-4cca-b47b-80ba34f2de2a" width="200" /> 

## í€ë”© ì°¸ì—¬ ë·°

- í€ë”© ì°¸ì—¬ìì˜ ì´ë¦„, í€ë”©í•  ê¸ˆì•¡, ì‘ì› ë©”ì‹œì§€ ë“±ì„ ì…ë ¥í•´ í€ë”©ì— ì°¸ì—¬í•  ìˆ˜ ìˆë‹¤.
- ì…ë ¥í•œ ì •ë³´ëŠ” ì¶”í›„ í€ë”© ìƒì„±ìì—ê²Œ ì „ë‹¬ëœë‹¤.
- ê²°ì œìˆ˜ë‹¨ì€ ì´ì „ì— ì…ë ¥í–ˆë˜ ì¹´ë“œê°€ ìˆìœ¼ë©´ ì„ íƒí•´ì„œ ê²°ì œí•  ìˆ˜ ìˆë‹¤.
- ì„ ë¬¼ëœ ê¸ˆì•¡ì´ í€ë”© ìƒì„±ìì˜ ì„ íƒì— ë”°ë¼ ë‹¤ë¥¸ ìƒí’ˆ êµ¬ë§¤ì— ì“°ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, í•´ë‹¹ ì‚¬í•­ì— ë™ì˜í•´ì•¼ ìµœì¢… ê²°ì œê°€ ê°€ëŠ¥í•˜ë‹¤.

<br/>
<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/dcc655ef-a626-4702-ad4a-b3613659da46" width="200" /> 

## ì¹´ë“œ ì¶”ê°€ ë·°

- ë§Œì¼ ì•„ì§ ê²°ì œìˆ˜ë‹¨ì„ ì…ë ¥í•˜ì§€ ì•Šì•˜ê±°ë‚˜ ìƒˆë¡œìš´ ê²°ì œ ìˆ˜ë‹¨ì„ ì…ë ¥í•˜ê³  ì‹¶ë‹¤ë©´ ì¹´ë“œì •ë³´ë¥¼ ì…ë ¥í•  ìˆ˜ ìˆë‹¤.
- ì¹´ë“œ ì •ë³´ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì…ë ¥í•˜ì§€ ì•Šì„ ê²½ìš°, ì•Œë¦¼ì°½ì´ ëœ¨ë©° ì˜¬ë°”ë¥¸ ê°’ì„ ì…ë ¥í•˜ë„ë¡ ìœ ë„í•œë‹¤.

<br/>
<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/b7b74ba7-de4c-4a04-b108-2e7d0205a8af" width="200" /> 

## í€ë”©ì°¸ì—¬ ì™„ë£Œ ë·°

- ìµœì¢…ì ìœ¼ë¡œ ì°¸ì—¬ê°€ ì™„ë£Œë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” í™”ë©´ì´ë‹¤.
- `ì°¸ì—¬ë‚´ì—­ ë³´ëŸ¬ê°€ê¸°`ë¥¼ í´ë¦­í•´ ì°¸ì—¬í•œ í€ë”© ë¦¬ìŠ¤íŠ¸ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.

<br/>
<img width="200" alt="Untitled (33)" src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/a4a4816e-80a7-4dc9-a866-96484aac5c05">

## í€ë”©ì°¸ì—¬ ëª©ë¡ ë·°

- ì°¸ì—¬í–ˆë˜ í€ë”© ë‚´ì—­ì„ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë·°ì´ë‹¤.
- í€ë”©ì„ í´ë¦­í•´ ì°¸ì—¬í–ˆë˜ í€ë”©ì„ ì·¨ì†Œí•  ìˆ˜ ìˆìœ¼ë©°, ì·¨ì†Œ ëœ ì´í›„ì—ëŠ” cancel  ìƒíƒœë¡œ ë³€ê²½ëœë‹¤.

<br/>
<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/9a0013bf-412c-4792-9d0d-2c79dcbbf24a" width="200" /> 
<img src="https://github.com/HAB-DAY/Habday_Web/assets/65955748/09e9fec5-6f03-4a69-8e11-9e359e3bb549" width="200" /> 

## í€ë”© ì¸ì¦ ë·°

- í€ë”© ìƒì„±ìê°€ í€ë”©ì´ ì„±ê³µí•œ í›„ 2ì£¼ ì´ë‚´ë¡œ ì•±ì„ í†µí•´ ì¸ì¦ì„ í•˜ë©´, ê¸°ì¡´ì˜ í€ë”© urlë¡œ ì§„ì…í–ˆì„ ë•Œ í€ë”© ë·°ê°€ ì•„ë‹Œ ì¸ì¦ ë·°ê°€ ëœ¬ë‹¤.
- ì¸ì¦ ìƒì„¸ë³´ê¸° ë·°ì—ì„œ ì‹¤ì œë¡œ ì„ ë¬¼ì„ êµ¬ì…í–ˆëŠ”ì§€ ì—¬ë¶€ì™€ ê°ì‚¬ ë©”ì‹œì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

<br/>

# ğŸ—‚ í´ë” êµ¬ì¡°

```
ğŸ“¦ 
â”œâ”€Â .eslintrc.json
â”œâ”€Â .gitignore
â”œâ”€Â .prettierrc
â”œâ”€Â README.md
â”œâ”€Â api
â”œâ”€Â assets
â”œâ”€Â components
â”‚Â Â â””â”€Â common
â”‚Â Â Â Â Â â”œâ”€Â Greeting.tsx
â”‚Â Â Â Â Â â”œâ”€Â Layout.tsx
â”‚Â Â Â Â Â â”œâ”€Â Progress.tsx
â”‚Â Â Â Â Â â””â”€Â modal
â”œâ”€Â hooks
â”œâ”€Â pages
â”‚Â Â â”œâ”€Â _app.tsx
â”‚Â Â â”œâ”€Â _document.tsx
â”‚Â Â â”œâ”€Â card
â”‚Â Â â”œâ”€Â complet
â”‚Â Â â”œâ”€Â detai
â”‚Â Â â”œâ”€Â fun
â”‚Â Â â”œâ”€Â index.ts
â”‚Â Â â”œâ”€Â landing
â”‚Â Â â”‚Â Â â””â”€Â [itemId].tsx  // Dynamic routing: ìµœì´ˆ ì§„ì… í˜ì´ì§€
â”‚Â Â â”œâ”€Â list
â”‚Â Â â”œâ”€Â revie
â”‚Â Â â””â”€Â signu
â”œâ”€Â public
â”œâ”€Â states  // for atoms
â”œâ”€Â styles  // for global styling
â”œâ”€Â types   // for common types
â”œâ”€Â util    // for constants
â””â”€Â yarn.lock
```
Â©generated by [Project Tree Generator](https://woochanleee.github.io/project-tree-generator)

<br/>

# ğŸ“ ì½”ë“œ ì†Œê°œ

- ì»¤ìŠ¤í…€í›…ì„ ì»¨íŠ¸ë¡¤ëŸ¬ ì—­í• ë¡œ ë‘” MVC íŒ¨í„´
- ì»¤ìŠ¤í…€í›…ì„ ì‚¬ìš©í•˜ë©´ UIì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> React ì»¤ìŠ¤í…€í›…(Custom Hook) ì´ë€?
> React í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒíƒœ ê´€ë¦¬, ë¼ì´í”„ì‚¬ì´í´ ê¸°ëŠ¥ ë“±ì„ ì¶”ìƒí™”í•˜ì—¬ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë¡œì§ì„ êµ¬í˜„í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” í›…

## í€ë”© ìƒì„¸ë³´ê¸°

- `/landing/ì•„ì´í…œid`ë¡œ ì§„ì…í•˜ê²Œ ë˜ë©´, Landing ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•©ë‹ˆë‹¤.
- `getServersizeProps` ë©”ì†Œë“œë¡œ paramsë¥¼ ë°›ì•„ì™€, ì„œë²„ì— í•´ë‹¹ idì˜ í€ë”©ìƒì„¸ì •ë³´ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.

```tsx
import React, { useEffect } from 'react';
import Layout from '../../components/common/Layout';
import { useFundDetail } from '../../hooks/fund/useFundDetail';
import { useRouter } from 'next/router';
import { useSetRecoilState } from 'recoil';
import { fundingIdState } from '../../states/atom';
import Greeting from '../../components/common/Greeting';

export interface ParamProps {
  params: ItemProps;
}

export interface ItemProps {
  itemId: string;
}

const STATUS = {
  PROGRESS: 'PROGRESS',
  FAILED: 'FAILED',
  SUCCESS: 'SUCCESS',
};

export default function Landing({ itemId }: ItemProps) {
  const router = useRouter();
  const { detail, isLoading, isError } = useFundDetail(parseInt(itemId));
  const setFundingId = useSetRecoilState(fundingIdState);

  const NAVER_AUTH_URL = `https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=${process.env.NEXT_PUBLIC_CLIENT_ID}&state=${process.env.NEXT_PUBLIC_LOGIN_STATE}&redirect_uri=${process.env.NEXT_PUBLIC_REDIRECT_URL}`;
  const onClickLogin = () => window.location.assign(NAVER_AUTH_URL);

  useEffect(() => {
    setFundingId(parseInt(itemId));
  }, [detail]);

  if (isLoading) {
    return <div>loading...</div>;
  }

  if (isError || detail?.status === STATUS.FAILED) {
    return <div>error! ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í€ë”©ì…ë‹ˆë‹¤</div>;
  }

  if (detail?.isConfirmation) {
    return (
      <Layout>
        <Greeting message="í€ë”© ì¸ì¦ì´ ë„ì°©í–ˆì–´ìš”!" isPing onClickIcon={onClickLogin} />
      </Layout>
    );
  }

  if (detail?.status === STATUS.SUCCESS) {
    return (
      <Layout link="ì°¸ì—¬ì´ë ¥ ë³´ëŸ¬ê°€ê¸°">
        <Greeting message="í€ë”©ì— ì„±ê³µí–ˆì–´ìš”, ê°ì‚¬í•©ë‹ˆë‹¤!" />
      </Layout>
    );
  }

  return (
    <Layout isNaver buttons={['ë„¤ì´ë²„ë¡œ ì‹œì‘í•˜ê¸°']} link="HABDAYê°€ ì²˜ìŒì´ì„¸ìš”?" onClickButton={onClickLogin}>
      <Greeting message={`${detail?.hostName}ë‹˜ì˜ í€ë”©ì— ì°¸ì—¬í•´ë³´ì„¸ìš”!`} />
    </Layout>
  );
}

export async function getServerSideProps({ params }: ParamProps) {
  const itemId = params.itemId;
  return { props: { itemId } };
}
```

- ìì£¼ ì‚¬ìš©í•˜ëŠ” ë¥¼ `common/Layout`ìœ¼ë¡œ ì„ ì–¸í•´, ê³µí†µ ì»´í¬ë„ŒíŠ¸í™” í•˜ì˜€ìŠµë‹ˆë‹¤.

```tsx
interface LayoutProps {
  children: React.ReactNode;
  buttons?: string[];
  link?: string;
  onClickButton?: () => void;
  onClickLeftButton?: () => void;
  isNaver?: boolean;
}

export default function Layout(props: LayoutProps) {
  const { children, buttons, link, onClickButton, onClickLeftButton, isNaver } = props;
  return (
    <Styled.Root>
      <Styled.Main>{children}</Styled.Main>
      <Styled.Footer isButtons={buttons?.length === 2}>
        {buttons && buttons?.length == 2 && (
          <Styled.ButtonLeft onClick={onClickLeftButton}>{buttons[1]}</Styled.ButtonLeft>
        )}
        {buttons && buttons?.length >= 1 && (
          <Styled.Button isNaver={isNaver} onClick={onClickButton}>
            {isNaver && <Image alt="ë„¤ì´ë²„ ë¡œê³ " src={NaverImg} height={42} width={42} />}
            {buttons[0]}
          </Styled.Button>
        )}
        {link && <Styled.Link>{link}</Styled.Link>}
      </Styled.Footer>
    </Styled.Root>
  );
}
```

- ì»¤ìŠ¤í…€í›… `useFundDetail`ì„ ì„ ì–¸í•´ UIì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.
- `useFundDetail`ì€ `fetchFundDetail` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤. axios ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ ë”ìš± íš¨ìœ¨ì ì¸ REST API í†µì‹ ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

```ts
// useFundDetail.ts
import { useQuery } from 'react-query';
import { fetchFundDetail } from '../../api/fund';
import { useSetRecoilState } from 'recoil';
import { QUERY_KEY } from '..';

export const useFundDetail = (itemId: number) => {
  const { isLoading, isError, data } = useQuery([QUERY_KEY.fundDetail], () => fetchFundDetail(itemId));

  return { detail: data, isLoading, isError };
};

// fund.ts
import { client } from '.';
import { Response } from '../types';
import { DetailOutput } from '../types/responses/fund';

export const fetchFundDetail = async (itemId: number) => {
  const {
    data: { data },
  } = await client.get<Response<DetailOutput>>(`/funding/showFundingContent?itemId=${itemId}`);
  return data;
};
```

## ë¡œê·¸ì¸

- í€ë”© ìƒì„¸ë³´ê¸° `Detail` ë·°ì—ì„œëŠ” `getServersideProps`ë¡œ query paramì˜ ì¸ê°€ì½”ë“œë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
- ì¸ê°€ì½”ë“œë¥¼ ì‚¬ìš©í•´ `useAccessToken`ì„ í˜¸ì¶œí•˜ë©´, ìì²´ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰í•´ recoil atomì— ì €ì¥í•©ë‹ˆë‹¤.

```tsx
interface codeProps {
  code: string;
}

export default function Detail({ code }: codeProps) {
  const router = useRouter();
  const itemId = useRecoilValue(fundingIdState);
  const { detail } = useFundDetail(itemId);
  const { accessToken, isLoading } = useAccessToken(code);
  // const signupStat = useRecoilValue(signupLogState);
  const { isRegister } = useIsRegister();

  useEffect(() => {
    if (code === undefined || isRegister === undefined) return;
    if (!isRegister) router.push('/signup');
    else if (detail?.isConfirmation) router.push('/review');
  }, [code, detail, accessToken, isRegister]);

  if (isLoading) return <div>ë¡œë”©ì¤‘...</div>;

  return (
    <Layout buttons={['í€ë”©ì— ì°¸ì—¬í• ë˜ìš”']} onClickButton={() => router.push('/fund')}>
      <Styled.Titles>
        <Styled.Title>{detail?.hostName}ë‹˜ì€</Styled.Title>
        <Styled.BoldTitle>{detail?.fundingName}</Styled.BoldTitle>
        <Styled.Title>ë¥¼(ì„) ê°–ê³ ì‹¶ì–´í•´ìš”</Styled.Title>
      </Styled.Titles>
      <Styled.Images>
        <Styled.ImageContainer>
          <Image
            src={detail?.fundingItemImg ?? AirpodImg}
            alt="í€ë”©ì•„ì´í…œ ì´ë¯¸ì§€"
            width={222}
            height={222}
            placeholder="blur"
            blurDataURL="asstes/default.svg"
            priority
          />
        </Styled.ImageContainer>
      </Styled.Images>
      <Styled.ProgressContainer>
        <Styled.ProgressTitle>í˜„ì¬ê¹Œì§€ ëª¨ì¸ ê¸ˆì•¡</Styled.ProgressTitle>
        <Styled.ProgressAmount>ï¿¦ {priceFormatter(detail?.totalPrice ?? 0)}</Styled.ProgressAmount>
        <Progress totalPrice={detail?.totalPrice ?? 0} goalPrice={detail?.goalPrice ?? 0} />
      </Styled.ProgressContainer>
    </Layout>
  );
}

export async function getServerSideProps(context: GetServerSidePropsContext) {
  return { props: { code: context.query.code ?? '' } };
}
```

- `AxiosInterceptor`ì—ì„œ ë°œê¸‰ëœ accessTokenì„ headerì— ë„£ìŠµë‹ˆë‹¤.

```tsx
export const BASE_URL = process.env.NEXT_PUBLIC_END;

const client = axios.create({
  baseURL: BASE_URL,
  headers: { 'Content-Type': 'application/json' },
});

function AxiosInterceptor({ children }: PropsWithChildren) {
  const router = useRouter();
  const accessToken = useRecoilValue(accessTokenState);

  const requestIntercept = client.interceptors.request.use((config) => {
    if (config.headers && !config.headers['accessToken']) {
      config.headers['accessToken'] = accessToken ? `${accessToken}` : '';

      return config;
    }

    return config;
  });

  const responseIntercept = client.interceptors.response.use(
    (config) => config,
    async (error) => {
      const config = error.config;
      console.log(error);
      if (error.response.status === 401) {
        alert('ë¡œê·¸ì¸ í›„ ì´ìš©í•´ ì£¼ì„¸ìš”');
      }
      return Promise.reject(error);
    }
  );

  useEffect(() => {
    return () => {
      client.interceptors.request.eject(requestIntercept);
      client.interceptors.response.eject(responseIntercept);
    };
  }, [requestIntercept]);

  return <>{children}</>;
}

export { client, AxiosInterceptor };
```

## í€ë”© ì°¸ì—¬í•˜ê¸°

- `/fund` ì§„ì…ì‹œ í€ë”©ì— ì°¸ì—¬í•  ìˆ˜ ìˆëŠ” `Fund` ì»´í¬ë„ŒíŠ¸ë¥¼ í˜¸ì¶œí•©ë‹ˆë‹¤.
- ë‹¤ì–‘í•œ inputë“¤ì˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ `useParticipantForm` ì»¤ìŠ¤í…€í›…ì„ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
- `usePaymentList`ëŠ” ê¸°ì¡´ì— ë“±ë¡í•´ë‘” ê²°ì œìˆ˜ë‹¨ ì •ë³´ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

```tsx
export default function Fund() {
  const router = useRouter();

  const itemId = useRecoilValue(fundingIdState);
  const { detail } = useFundDetail(itemId);

  const { participant, setParticipantForm, submitPariticipant, toggleAgree } = useParticipantForm(async () => {
    router.push('/complete');
  });
  const { isError, isLoading, paymentList } = usePaymentList();

  useEffect(() => {
    paymentList.length && setParticipantForm({ paymentId: paymentList[0].paymentId });
  }, [paymentList]);

  return (
    <Layout buttons={['ë‹¤ìŒ']} onClickButton={submitPariticipant}>
      <Styled.Title>{detail?.hostName} ë‹˜ì—ê²Œ</Styled.Title>
      <Styled.Form>
        <Styled.Label>ë³´ë‚´ëŠ” ë¶„ ì„±í•¨</Styled.Label>
        <Styled.Input
          value={participant.name}
          id="buyer"
          type="text"
          onChange={(e) => setParticipantForm({ name: e.target.value })}
        />
      </Styled.Form>
      <Styled.Form>
        <Styled.Label>í€ë”© ê¸ˆì•¡</Styled.Label>
        <Progress
          goalPrice={detail?.goalPrice ?? 0}
          totalPrice={detail?.totalPrice ?? 0}
          isPing
          amount={participant.amount}
        />
        <Styled.Input
          id="amount"
          type="number"
          max={`${detail?.goalPrice ?? 0 - (detail?.totalPrice ?? 0)}`}
          placeholder={`ìµœëŒ€ ${priceFormatter(detail?.goalPrice ?? 0 - (detail?.totalPrice ?? 0))}ì›ê¹Œì§€ ê°€ëŠ¥í•´ìš”`}
          onChange={(e) => setParticipantForm({ amount: parseInt(e.target.value) })}
        />
      </Styled.Form>
      <Styled.Form>
        <Styled.Label>ì‘ì› ë©”ì‹œì§€</Styled.Label>
        <Styled.Textarea
          value={participant.message}
          onChange={(e) => setParticipantForm({ message: e.target.value })}
        />
        <Styled.Maxline>{participant.message.length || 0}/60</Styled.Maxline>
      </Styled.Form>
      <Styled.Form>
        <Styled.Label>
          ì¹´ë“œ ê²°ì œ
          <Styled.AddCardButton onClick={() => router.push('/card')}>ì¹´ë“œ ì¶”ê°€</Styled.AddCardButton>
        </Styled.Label>
        {paymentList.length ? (
          <Styled.Select defaultValue={0}>
            {paymentList.map(({ paymentId, paymentName }, index) => (
              <option key={paymentId} onClick={() => setParticipantForm({ paymentId: paymentId })}>
                {paymentName}
              </option>
            ))}
          </Styled.Select>
        ) : (
          <Styled.Message>ê²°ì œìˆ˜ë‹¨ì„ ì¶”ê°€í•´ì£¼ì„¸ìš”</Styled.Message>
        )}
        <Styled.Check>
          ì„ ë¬¼í•˜ì‹¤ ê¸ˆì•¡ì€ ëª©ì ê¸ˆì•¡ ë¯¸ë‹¬ì„±ì‹œ ë‹¤ë¥¸ ìƒí’ˆêµ¬ë§¤ì—
          <br />
          ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë™ì˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
          <input type="checkbox" onClick={toggleAgree} />
        </Styled.Check>
      </Styled.Form>
    </Layout>
  );
}
```

- ì‚¬ìš©ì ì…ë ¥ì„ ì²˜ë¦¬í•˜ëŠ” `useParticipantForm`ì€ recoil atomì„ ì‚¬ìš©í•˜ì—¬ ì‚¬ìš©ìì˜ ì…ë ¥ê°’ì´ ìœ ì§€ë˜ë„ë¡ í•©ë‹ˆë‹¤.
- `submitPariticipant` í•¨ìˆ˜ì—ì„œ ì—ëŸ¬í•¸ë“¤ë§ì„ ìˆ˜í–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤.
- react query ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬, ë°ì´í„° íŒ¨ì¹­ ì„±ê³µì‹œì— ê¸°ì¡´ì— ìˆë˜ `fundDetail` ë°ì´í„°ë¥¼ ìºì‹±í•˜ê³  ì„±ê³µ í›„ì— í•´ì•¼í•  ì¼ì„ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨ ë°ì´í„° ì •í•©ì„±ì„ ë³´ì¥í•˜ê³  ì„œë²„ ìƒíƒœê´€ë¦¬ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.

```ts
export const useParticipateMutation = (onSuccessMutation: () => void) => {
  const participant = useRecoilValue(participantState);
  const queryClient = useQueryClient();

  return useMutation(() => postParticipate(participant), {
    onSuccess() {
      queryClient.invalidateQueries([QUERY_KEY.fundDetail]);
      onSuccessMutation();
    },
    onError({ response }: ParticipateErrorResponse) {
      alert(response.data.msg);
    },
  });
};

export const useParticipantForm = (onSuccessMutation: () => void) => {
  const [participant, setParticipant] = useRecoilState(participantSelector);
  const [isAgree, setIsAgree] = useState<boolean>(false);
  const participantMutation = useParticipateMutation(onSuccessMutation);

  const setParticipantForm = (input: Partial<ParticipateInput>) => {
    setParticipant({ ...participant, ...input });
  };

  const submitPariticipant = () => {
    if (participant.paymentId === -99) alert('ê²°ì œìˆ˜ë‹¨ì„ ì„ íƒí•´ì£¼ì„¸ìš”');
    else if (participant.amount < 101) alert('ìµœì†Œ ê¸ˆì•¡ì€ 101ì›ì…ë‹ˆë‹¤');
    else if (!participant.name.length) alert('ì„±í•¨ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
    else if (!isAgree) alert('ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”');
    else participantMutation.mutate();
  };

  const toggleAgree = () => setIsAgree((prev) => !prev);

  return { participant, setParticipantForm, submitPariticipant, toggleAgree };
};

```
